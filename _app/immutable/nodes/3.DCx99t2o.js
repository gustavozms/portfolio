import{s as E,n as p,o as I,d as j,e as q}from"../chunks/scheduler.DY1RaQkN.js";import{S as $,i as k,e as y,c as M,d as x,g as _,m as S,j as B,k as N,n as V,p as X,o as Y,q as P,r as U,t as F,a as H,u as J}from"../chunks/index.Bl7KmB13.js";function K(f){let t,a,e,i;return{c(){t=y("div"),a=y("canvas"),this.h()},l(r){t=M(r,"DIV",{class:!0});var d=x(t);a=M(d,"CANVAS",{class:!0}),x(a).forEach(_),d.forEach(_),this.h()},h(){S(a,"class","svelte-1awpvs6"),S(t,"class","canvas-container svelte-1awpvs6")},m(r,d){B(r,t,d),N(t,a),f[2](a),e||(i=V(a,"contextmenu",X(f[1])),e=!0)},p,i:p,o:p,d(r){r&&_(t),f[2](null),e=!1,i()}}}let m=256,h=256,o=4;function O(f,t,a){let e,i,r=[],d=!1;const G=()=>{r=Array.from({length:m},()=>Array.from({length:h},()=>({state:Math.random()>.9?1:0,fadeLevel:0})))},g=()=>{if(i){i.clearRect(0,0,e.width,e.height);for(let n=0;n<m;n++)for(let c=0;c<h;c++){const l=r[n][c];if(l.state===1)i.fillStyle="black",i.fillRect(n*o,c*o,o,o);else if(l.fadeLevel>0){const s=Math.floor(255*l.fadeLevel);i.fillStyle=`rgb(${s}, ${s}, ${s})`,i.fillRect(n*o,c*o,o,o),r[n][c].fadeLevel=Math.min(l.fadeLevel+.1,1)}else i.fillStyle="white",i.fillRect(n*o,c*o,o,o)}}},R=()=>{r=r.map((c,l)=>c.map((s,u)=>{const v=z(l,u);return s.state===1&&(v<2||v>3)?{state:0,fadeLevel:.1}:s.state===0&&v===3?{state:1,fadeLevel:0}:s})),g()},z=(n,c)=>{let l=0;for(let s=-1;s<=1;s++)for(let u=-1;u<=1;u++){if(s===0&&u===0)continue;const v=(n+s+m)%m,D=(c+u+h)%h;l+=r[v][D].state}return l},L=n=>{if(d){const c=e.getBoundingClientRect(),l=Math.floor((n.clientX-c.left)/o),s=Math.floor((n.clientY-c.top)/o);l>=0&&l<m&&s>=0&&s<h&&(r[l][s]={state:1,fadeLevel:0},r[l+1][s+1]={state:1,fadeLevel:0},r[l-1][s-1]={state:1,fadeLevel:0},g())}},w=()=>{d=!0},b=()=>{d=!1};I(()=>{G(),e&&(i=e.getContext("2d"),a(0,e.width=m*o,e),a(0,e.height=h*o,e)),g();const n=setInterval(R,100);return e.addEventListener("mousedown",w),e.addEventListener("mouseup",b),e.addEventListener("mousemove",L),()=>{clearInterval(n),e.removeEventListener("mousedown",w),e.removeEventListener("mouseup",b),e.removeEventListener("mousemove",L)}});function A(n){j.call(this,f,n)}function C(n){q[n?"unshift":"push"](()=>{e=n,a(0,e)})}return[e,A,C]}class Q extends ${constructor(t){super(),k(this,t,O,K,E,{})}}function T(f){let t,a;return t=new Q({}),{c(){Y(t.$$.fragment)},l(e){P(t.$$.fragment,e)},m(e,i){U(t,e,i),a=!0},p,i(e){a||(F(t.$$.fragment,e),a=!0)},o(e){H(t.$$.fragment,e),a=!1},d(e){J(t,e)}}}class ee extends ${constructor(t){super(),k(this,t,null,T,E,{})}}export{ee as component};
